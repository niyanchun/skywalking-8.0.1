{"remainingRequest":"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/thread-loader/dist/cjs.js!/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/babel-loader/lib/index.js!/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/src/views/components/topology/chart/utils/nodeElement.js","dependencies":[{"path":"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/src/views/components/topology/chart/utils/nodeElement.js","mtime":1592485041000},{"path":"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.function.name\";\n\n/**\n * Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements.  See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to You under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License.  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport icons from './icons';\nicons['KAFKA-CONSUMER'] = icons.KAFKA;\nexport default (function (d3, graph, tool, funcs, tip) {\n  var nodeEnter = graph.append('g').call(d3.drag().on('start', funcs.dragstart).on('drag', funcs.dragged).on('end', funcs.dragended)).on('mouseover', function (d) {\n    tip.html(function (data) {\n      return \"<div>\".concat(data.name, \"</div>\");\n    }).show(d, this);\n  }).on('mouseout', function () {\n    tip.hide(this);\n  }).on('click', function (d) {\n    event.stopPropagation();\n    event.preventDefault();\n    tool.attr('style', 'display: none');\n    funcs.handleNodeClick(d);\n\n    if (d.isReal) {\n      tool.attr('transform', \"translate(\".concat(d.x, \",\").concat(d.y - 20, \")\")).attr('style', 'display: block');\n    }\n  });\n  nodeEnter.append('image').attr('width', 49).attr('height', 49).attr('x', 2).attr('y', 10).attr('style', 'cursor: move;').attr('xlink:href', function (d) {\n    return d.sla < 98 && d.isReal ? icons.CUBEERROR : icons.CUBE;\n  });\n  nodeEnter.append('image').attr('width', 32).attr('height', 32).attr('x', 6).attr('y', -10).attr('style', 'opacity: 0.5;').attr('xlink:href', icons.LOCAL);\n  nodeEnter.append('image').attr('width', 18).attr('height', 18).attr('x', 13).attr('y', -7).attr('xlink:href', function (d) {\n    return !d.type || d.type === 'N/A' ? icons.UNDEFINED : icons[d.type.toUpperCase().replace('-', '')];\n  });\n  nodeEnter.append('text').attr('class', 'topo-text').attr('text-anchor', 'middle').attr('x', 22).attr('y', 70).text(function (d) {\n    return d.name.length > 20 ? \"\".concat(d.name.substring(0, 20), \"...\") : d.name;\n  });\n  return nodeEnter;\n});",{"version":3,"sources":["/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/src/views/components/topology/chart/utils/nodeElement.js"],"names":["icons","KAFKA","d3","graph","tool","funcs","tip","nodeEnter","append","call","drag","on","dragstart","dragged","dragended","d","html","data","name","show","hide","event","stopPropagation","preventDefault","attr","handleNodeClick","isReal","x","y","sla","CUBEERROR","CUBE","LOCAL","type","UNDEFINED","toUpperCase","replace","text","length","substring"],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements.  See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to You under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License.  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport icons from './icons';\n\nicons['KAFKA-CONSUMER'] = icons.KAFKA;\nexport default (d3, graph, tool, funcs, tip) => {\n  const nodeEnter = graph\n    .append('g')\n    .call(\n      d3\n        .drag()\n        .on('start', funcs.dragstart)\n        .on('drag', funcs.dragged)\n        .on('end', funcs.dragended),\n    )\n    .on('mouseover', function(d) {\n      tip.html((data) => `<div>${data.name}</div>`).show(d, this);\n    })\n    .on('mouseout', function() {\n      tip.hide(this);\n    })\n    .on('click', (d) => {\n      event.stopPropagation();\n      event.preventDefault();\n      tool.attr('style', 'display: none');\n      funcs.handleNodeClick(d);\n      if (d.isReal) {\n        tool.attr('transform', `translate(${d.x},${d.y - 20})`).attr('style', 'display: block');\n      }\n    });\n  nodeEnter\n    .append('image')\n    .attr('width', 49)\n    .attr('height', 49)\n    .attr('x', 2)\n    .attr('y', 10)\n    .attr('style', 'cursor: move;')\n    .attr('xlink:href', (d) => ((d.sla < 98 && d.isReal) ? icons.CUBEERROR : icons.CUBE));\n  nodeEnter\n    .append('image')\n    .attr('width', 32)\n    .attr('height', 32)\n    .attr('x', 6)\n    .attr('y', -10)\n    .attr('style', 'opacity: 0.5;')\n    .attr('xlink:href', icons.LOCAL);\n  nodeEnter\n    .append('image')\n    .attr('width', 18)\n    .attr('height', 18)\n    .attr('x', 13)\n    .attr('y', -7)\n    .attr('xlink:href', (d) =>\n      !d.type || d.type === 'N/A' ? icons.UNDEFINED : icons[d.type.toUpperCase().replace('-', '')],\n    );\n  nodeEnter\n    .append('text')\n    .attr('class', 'topo-text')\n    .attr('text-anchor', 'middle')\n    .attr('x', 22)\n    .attr('y', 70)\n    .text((d) => (d.name.length > 20 ? `${d.name.substring(0, 20)}...` : d.name));\n  return nodeEnter;\n};\n"]}]}