{"remainingRequest":"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/thread-loader/dist/cjs.js!/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/babel-loader/lib/index.js!/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/ts-loader/index.js??ref--13-3!/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/src/store/modules/dashboard/dashboard-data-layout.ts","dependencies":[{"path":"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/src/store/modules/dashboard/dashboard-data-layout.ts","mtime":1592485041000},{"path":"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/ts-loader/index.js","mtime":1545640398000}],"contextDependencies":[],"result":["import _defineProperty from \"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _objectSpread from \"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _Object$keys from \"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/@babel/runtime-corejs2/core-js/object/keys\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.function.name\";\nimport _JSON$stringify from \"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/@babel/runtime-corejs2/core-js/json/stringify\";\nimport _toConsumableArray from \"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\n\nvar _mutations;\n\n/**\n * Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements.  See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to You under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License.  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as types from './mutation-types';\nexport var initState = {\n  current: 0,\n  group: 0,\n  index: 0,\n  tree: [{\n    name: '',\n    type: 'service',\n    query: {\n      service: {},\n      endpoint: {},\n      instance: {},\n      database: {}\n    },\n    children: []\n  }]\n}; // mutations\n\nvar mutations = (_mutations = {}, _defineProperty(_mutations, types.SET_COMPS_TREE, function (state, data) {\n  state.tree = data;\n}), _defineProperty(_mutations, types.IMPORT_TREE, function (state, data) {\n  var _state$tree;\n\n  (_state$tree = state.tree).push.apply(_state$tree, _toConsumableArray(data));\n\n  window.localStorage.setItem('dashboard', _JSON$stringify(state.tree));\n}), _defineProperty(_mutations, types.SET_GROUP_QUERY, function (state, params) {\n  state.tree[state.group].query = params;\n}), _defineProperty(_mutations, types.SET_CURRENT_COMPS, function (state, current) {\n  state.current = current;\n}), _defineProperty(_mutations, types.SET_CURRENT_INDEX, function (state, index) {\n  state.index = index;\n}), _defineProperty(_mutations, types.SET_CURRENT_GROUP, function (state, current) {\n  state.group = current;\n  state.current = 0;\n}), _defineProperty(_mutations, types.SET_CURRENT_GROUP_WITH_CURRENT, function (state, _ref) {\n  var index = _ref.index,\n      _ref$current = _ref.current,\n      current = _ref$current === void 0 ? 0 : _ref$current;\n  state.group = index;\n  state.current = current;\n}), _defineProperty(_mutations, types.ADD_COMPS_GROUP, function (state, params) {\n  if (!params.name) {\n    return;\n  }\n\n  var newTree = [];\n\n  _Object$keys(state.tree).forEach(function (i) {\n    newTree.push(state.tree[i]);\n  });\n\n  newTree.push({\n    name: params.name,\n    type: params.type,\n    query: {},\n    children: [{\n      name: 'demo',\n      children: []\n    }]\n  });\n  state.tree = newTree;\n  window.localStorage.setItem('dashboard', _JSON$stringify(state.tree));\n}), _defineProperty(_mutations, types.ADD_COMPS_TREE, function (state, params) {\n  if (!params.name) {\n    return;\n  }\n\n  state.tree[state.group].children.push({\n    name: params.name,\n    children: []\n  });\n  window.localStorage.setItem('dashboard', _JSON$stringify(state.tree));\n}), _defineProperty(_mutations, types.IMPORT_COMPS_TREE, function (state, params) {\n  state.tree[state.group].children.push(params);\n  window.localStorage.setItem('dashboard', _JSON$stringify(state.tree));\n}), _defineProperty(_mutations, types.DELETE_COMPS_GROUP, function (state, index) {\n  state.tree.splice(index, 1);\n\n  if (!state.tree[state.group]) {\n    state.group--;\n  }\n\n  window.localStorage.setItem('dashboard', _JSON$stringify(state.tree));\n}), _defineProperty(_mutations, types.DELETE_COMPS_TREE, function (state, index) {\n  state.tree[state.group].children.splice(index, 1);\n\n  if (!state.tree[state.group].children[state.current]) {\n    state.current--;\n  }\n\n  window.localStorage.setItem('dashboard', _JSON$stringify(state.tree));\n}), _defineProperty(_mutations, types.ADD_COMP, function (state) {\n  var comp = {\n    width: 3,\n    title: 'Title',\n    height: 350,\n    entityType: 'Service',\n    independentSelector: true,\n    metricType: 'UNKNOWN'\n  };\n  state.tree[state.group].children[state.current].children.push(comp);\n  window.localStorage.setItem('dashboard', _JSON$stringify(state.tree));\n}), _defineProperty(_mutations, types.DELETE_COMP, function (state, index) {\n  state.tree[state.group].children[state.current].children.splice(index, 1);\n  window.localStorage.setItem('dashboard', _JSON$stringify(state.tree));\n}), _defineProperty(_mutations, types.EDIT_COMP_CONFIG, function (state, params) {\n  var temp = state.tree[state.group].children[state.current].children[params.index];\n  state.tree[state.group].children[state.current].children[params.index] = _objectSpread({}, temp, params.values);\n  window.localStorage.setItem('dashboard', _JSON$stringify(state.tree));\n}), _mutations);\nexport default {\n  state: initState,\n  mutations: mutations\n};",{"version":3,"sources":["/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/src/store/modules/dashboard/dashboard-data-layout.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements.  See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to You under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License.  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { MutationTree } from 'vuex';\nimport { CompsTree } from '@/types/dashboard';\nimport * as types from './mutation-types';\nexport interface State {\n  current: number;\n  group: number;\n  index: number;\n  tree: CompsTree[];\n}\n\nexport const initState: State = {\n  current: 0,\n  group: 0,\n  index: 0,\n  tree: [\n    {\n      name: '',\n      type: 'service',\n      query: {\n        service: {},\n        endpoint: {},\n        instance: {},\n        database: {},\n      },\n      children: [],\n    },\n  ],\n};\n\n// mutations\nconst mutations: MutationTree<State> = {\n  [types.SET_COMPS_TREE](state: State, data: CompsTree[]) {\n    state.tree = data;\n  },\n  [types.IMPORT_TREE](state: State, data: CompsTree[]) {\n    state.tree.push(...data);\n    window.localStorage.setItem('dashboard', JSON.stringify(state.tree));\n  },\n  [types.SET_GROUP_QUERY](state: State, params: any) {\n    state.tree[state.group].query = params;\n  },\n  [types.SET_CURRENT_COMPS](state: State, current: number) {\n    state.current = current;\n  },\n  [types.SET_CURRENT_INDEX](state: State, index: number) {\n    state.index = index;\n  },\n  [types.SET_CURRENT_GROUP](state: State, current: number) {\n    state.group = current;\n    state.current = 0;\n  },\n  [types.SET_CURRENT_GROUP_WITH_CURRENT](state: State, { index, current = 0 }: { index: number; current: number }) {\n    state.group = index;\n    state.current = current;\n  },\n  [types.ADD_COMPS_GROUP](state: State, params: { type: string; name: string }) {\n    if (!params.name) {\n      return;\n    }\n\n    const newTree = [];\n    Object.keys(state.tree).forEach((i: any) => {\n      newTree.push(state.tree[i]);\n    });\n    newTree.push({ name: params.name, type: params.type, query: {}, children: [{ name: 'demo', children: [] }] });\n    state.tree = newTree;\n\n    window.localStorage.setItem('dashboard', JSON.stringify(state.tree));\n  },\n  [types.ADD_COMPS_TREE](state: State, params: { name: string }) {\n    if (!params.name) {\n      return;\n    }\n    state.tree[state.group].children.push({ name: params.name, children: [] });\n    window.localStorage.setItem('dashboard', JSON.stringify(state.tree));\n  },\n  [types.IMPORT_COMPS_TREE](state: State, params: any) {\n    state.tree[state.group].children.push(params);\n    window.localStorage.setItem('dashboard', JSON.stringify(state.tree));\n  },\n  [types.DELETE_COMPS_GROUP](state: State, index: number) {\n    state.tree.splice(index, 1);\n    if (!state.tree[state.group]) {\n      state.group--;\n    }\n    window.localStorage.setItem('dashboard', JSON.stringify(state.tree));\n  },\n  [types.DELETE_COMPS_TREE](state: State, index: number) {\n    state.tree[state.group].children.splice(index, 1);\n    if (!state.tree[state.group].children[state.current]) {\n      state.current--;\n    }\n    window.localStorage.setItem('dashboard', JSON.stringify(state.tree));\n  },\n  [types.ADD_COMP](state: State) {\n    const comp = {\n      width: 3,\n      title: 'Title',\n      height: 350,\n      entityType: 'Service',\n      independentSelector: true,\n      metricType: 'UNKNOWN',\n    };\n    state.tree[state.group].children[state.current].children.push(comp);\n    window.localStorage.setItem('dashboard', JSON.stringify(state.tree));\n  },\n  [types.DELETE_COMP](state: State, index: number) {\n    state.tree[state.group].children[state.current].children.splice(index, 1);\n    window.localStorage.setItem('dashboard', JSON.stringify(state.tree));\n  },\n  [types.EDIT_COMP_CONFIG](state: State, params: { values: any; index: number }) {\n    const temp = state.tree[state.group].children[state.current].children[params.index];\n\n    state.tree[state.group].children[state.current].children[params.index] = { ...temp, ...params.values };\n    window.localStorage.setItem('dashboard', JSON.stringify(state.tree));\n  },\n};\n\nexport default {\n  state: initState,\n  mutations,\n};\n"],"sourceRoot":""}]}