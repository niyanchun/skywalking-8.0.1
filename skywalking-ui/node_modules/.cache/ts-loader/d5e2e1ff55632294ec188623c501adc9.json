{"remainingRequest":"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/thread-loader/dist/cjs.js!/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/babel-loader/lib/index.js!/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/ts-loader/index.js??ref--13-3!/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/src/store/modules/global/index.ts","dependencies":[{"path":"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/src/store/modules/global/index.ts","mtime":1592485041000},{"path":"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/ts-loader/index.js","mtime":1545640398000}],"contextDependencies":[],"result":["import _getIterator from \"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/@babel/runtime-corejs2/core-js/get-iterator\";\nimport _defineProperty from \"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _JSON$stringify from \"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/@babel/runtime-corejs2/core-js/json/stringify\";\nimport _parseInt from \"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/@babel/runtime-corejs2/core-js/parse-int\";\n\nvar _mutations;\n\n/**\n * Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements.  See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to You under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License.  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as types from '@/store/mutation-types';\nimport getDurationRow from '@/utils/datetime';\nimport getLocalTime from '@/utils/localtime';\nvar timer = null;\n\nvar dateFormat = function dateFormat(date, step) {\n  var year = date.getFullYear();\n  var monthTemp = date.getMonth() + 1;\n  var month = \"\".concat(monthTemp);\n\n  if (monthTemp < 10) {\n    month = \"0\".concat(monthTemp);\n  }\n\n  if (step === 'MONTH') {\n    return \"\".concat(year, \"-\").concat(month);\n  }\n\n  var dayTemp = date.getDate();\n  var day = \"\".concat(dayTemp);\n\n  if (dayTemp < 10) {\n    day = \"0\".concat(dayTemp);\n  }\n\n  if (step === 'DAY') {\n    return \"\".concat(year, \"-\").concat(month, \"-\").concat(day);\n  }\n\n  var hourTemp = date.getHours();\n  var hour = \"\".concat(hourTemp);\n\n  if (hourTemp < 10) {\n    hour = \"0\".concat(hourTemp);\n  }\n\n  if (step === 'HOUR') {\n    return \"\".concat(year, \"-\").concat(month, \"-\").concat(day, \" \").concat(hour);\n  }\n\n  var minuteTemp = date.getMinutes();\n  var minute = \"\".concat(minuteTemp);\n\n  if (minuteTemp < 10) {\n    minute = \"0\".concat(minuteTemp);\n  }\n\n  if (step === 'MINUTE') {\n    return \"\".concat(year, \"-\").concat(month, \"-\").concat(day, \" \").concat(hour).concat(minute);\n  }\n\n  return '';\n};\n\nvar dateFormatTime = function dateFormatTime(date, step) {\n  var year = date.getFullYear();\n  var monthTemp = date.getMonth() + 1;\n  var month = \"\".concat(monthTemp);\n\n  if (monthTemp < 10) {\n    month = \"0\".concat(monthTemp);\n  }\n\n  if (step === 'MONTH') {\n    return \"\".concat(year, \"-\").concat(month);\n  }\n\n  var dayTemp = date.getDate();\n  var day = \"\".concat(dayTemp);\n\n  if (dayTemp < 10) {\n    day = \"0\".concat(dayTemp);\n  }\n\n  if (step === 'DAY') {\n    return \"\".concat(month, \"-\").concat(day);\n  }\n\n  var hourTemp = date.getHours();\n  var hour = \"\".concat(hourTemp);\n\n  if (hourTemp < 10) {\n    hour = \"0\".concat(hourTemp);\n  }\n\n  if (step === 'HOUR') {\n    return \"\".concat(month, \"-\").concat(day, \" \").concat(hour);\n  }\n\n  var minuteTemp = date.getMinutes();\n  var minute = \"\".concat(minuteTemp);\n\n  if (minuteTemp < 10) {\n    minute = \"0\".concat(minuteTemp);\n  }\n\n  if (step === 'MINUTE') {\n    return \"\".concat(hour, \":\").concat(minute, \"\\n\").concat(month, \"-\").concat(day);\n  }\n\n  return '';\n};\n\nvar initState = {\n  durationRow: getDurationRow(),\n  eventStack: [],\n  chartStack: [],\n  edit: false,\n  lock: true,\n  utc: window.localStorage.getItem('utc') || -(new Date().getTimezoneOffset() / 60)\n}; // getters\n\nvar getters = {\n  duration: function duration(state) {\n    return {\n      start: getLocalTime(_parseInt(state.utc + '', 10), state.durationRow.start),\n      end: getLocalTime(_parseInt(state.utc + '', 10), state.durationRow.end),\n      step: state.durationRow.step\n    };\n  },\n  intervalTime: function intervalTime(state, getter) {\n    var interval = 946080000000;\n\n    switch (getter.duration.step) {\n      case 'MINUTE':\n        interval = 60000;\n        break;\n\n      case 'HOUR':\n        interval = 3600000;\n        break;\n\n      case 'DAY':\n        interval = 86400000;\n        break;\n\n      case 'MONTH':\n        interval = (getter.duration.end.getTime() - getter.duration.start.getTime()) / (getter.duration.end.getFullYear() * 12 + getter.duration.end.getMonth() - getter.duration.start.getFullYear() * 12 - getter.duration.start.getMonth());\n        break;\n    }\n\n    var utcSpace = (_parseInt(state.utc + '', 10) + new Date().getTimezoneOffset() / 60) * 3600000;\n    var startUnix = getter.duration.start.getTime();\n    var endUnix = getter.duration.end.getTime();\n    var timeIntervals = [];\n\n    for (var i = 0; i <= endUnix - startUnix; i += interval) {\n      var temp = dateFormatTime(new Date(startUnix + i - utcSpace), getter.duration.step);\n      timeIntervals.push(temp);\n    }\n\n    return timeIntervals;\n  },\n  durationTime: function durationTime(_, getter) {\n    return {\n      start: dateFormat(getter.duration.start, getter.duration.step),\n      end: dateFormat(getter.duration.end, getter.duration.step),\n      step: getter.duration.step\n    };\n  }\n}; // mutations\n\nvar mutations = (_mutations = {}, _defineProperty(_mutations, types.SET_DURATION, function (state, data) {\n  localStorage.setItem('durationRow', _JSON$stringify(data, null, 0));\n  state.durationRow = data;\n}), _defineProperty(_mutations, types.RESET_DURATION, function (state) {\n  localStorage.removeItem('durationRow');\n  state.durationRow = getDurationRow();\n}), _defineProperty(_mutations, types.SET_UTC, function (state, data) {\n  state.utc = data;\n}), _defineProperty(_mutations, types.SET_EVENTS, function (state, data) {\n  state.eventStack = data;\n}), _defineProperty(_mutations, types.SET_CHARTS, function (state, data) {\n  state.chartStack.push(data);\n}), _defineProperty(_mutations, types.RUN_EVENTS, function (state) {\n  clearTimeout(timer);\n  timer = setTimeout(function () {\n    return state.eventStack.forEach(function (event) {\n      setTimeout(event(), 0);\n    });\n  }, 500);\n}), _defineProperty(_mutations, types.SET_EDIT, function (state, status) {\n  state.edit = status;\n}), _mutations); // actions\n\nvar actions = {\n  SET_UTC: function SET_UTC(context, data) {\n    context.commit(types.SET_UTC, data);\n    context.commit(types.RUN_EVENTS);\n  },\n  SET_DURATION: function SET_DURATION(context, data) {\n    context.commit(types.SET_DURATION, data);\n\n    if (window.axiosCancel.length !== 0) {\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = _getIterator(window.axiosCancel), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var event = _step.value;\n          setTimeout(event(), 0);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      window.axiosCancel = [];\n    }\n\n    context.commit(types.RUN_EVENTS);\n  },\n  RESET_DURATION: function RESET_DURATION(context) {\n    context.commit(types.RESET_DURATION);\n    context.commit(types.RUN_EVENTS);\n  },\n  RUN_EVENTS: function RUN_EVENTS(context) {\n    if (window.axiosCancel.length !== 0) {\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = _getIterator(window.axiosCancel), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var event = _step2.value;\n          setTimeout(event(), 0);\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      window.axiosCancel = [];\n    }\n\n    context.commit(types.RUN_EVENTS);\n  },\n  SET_CHARTS: function SET_CHARTS(context, data) {\n    context.commit(types.SET_CHARTS, data);\n  },\n  CLEAR_CHARTS: function CLEAR_CHARTS(context) {\n    context.commit(types.SET_CHARTS, []);\n  },\n  SET_EDIT: function SET_EDIT(context, status) {\n    context.commit(types.SET_EDIT, status);\n  },\n  SET_LOCK: function SET_LOCK(context, status) {\n    context.commit(types.SET_LOCK, status);\n  }\n};\nexport default {\n  state: initState,\n  getters: getters,\n  actions: actions,\n  mutations: mutations\n};",{"version":3,"sources":["/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/src/store/modules/global/index.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements.  See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to You under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License.  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as types from '@/store/mutation-types';\nimport { Duration, DurationTime } from '@/types/global';\nimport getDurationRow from '@/utils/datetime';\nimport getLocalTime from '@/utils/localtime';\nimport { ActionTree, Commit, MutationTree } from 'vuex';\n\nlet timer: any = null;\n\nconst dateFormat = (date: Date, step: string): string => {\n  const year = date.getFullYear();\n  const monthTemp = date.getMonth() + 1;\n  let month: string = `${monthTemp}`;\n  if (monthTemp < 10) {\n    month = `0${monthTemp}`;\n  }\n  if (step === 'MONTH') {\n    return `${year}-${month}`;\n  }\n  const dayTemp = date.getDate();\n  let day: string = `${dayTemp}`;\n  if (dayTemp < 10) {\n    day = `0${dayTemp}`;\n  }\n  if (step === 'DAY') {\n    return `${year}-${month}-${day}`;\n  }\n  const hourTemp = date.getHours();\n  let hour: string = `${hourTemp}`;\n  if (hourTemp < 10) {\n    hour = `0${hourTemp}`;\n  }\n  if (step === 'HOUR') {\n    return `${year}-${month}-${day} ${hour}`;\n  }\n  const minuteTemp = date.getMinutes();\n  let minute: string = `${minuteTemp}`;\n  if (minuteTemp < 10) {\n    minute = `0${minuteTemp}`;\n  }\n  if (step === 'MINUTE') {\n    return `${year}-${month}-${day} ${hour}${minute}`;\n  }\n  return '';\n};\nconst dateFormatTime = (date: Date, step: string): string => {\n  const year = date.getFullYear();\n  const monthTemp = date.getMonth() + 1;\n  let month: string = `${monthTemp}`;\n  if (monthTemp < 10) {\n    month = `0${monthTemp}`;\n  }\n  if (step === 'MONTH') {\n    return `${year}-${month}`;\n  }\n  const dayTemp = date.getDate();\n  let day: string = `${dayTemp}`;\n  if (dayTemp < 10) {\n    day = `0${dayTemp}`;\n  }\n  if (step === 'DAY') {\n    return `${month}-${day}`;\n  }\n  const hourTemp = date.getHours();\n  let hour: string = `${hourTemp}`;\n  if (hourTemp < 10) {\n    hour = `0${hourTemp}`;\n  }\n  if (step === 'HOUR') {\n    return `${month}-${day} ${hour}`;\n  }\n  const minuteTemp = date.getMinutes();\n  let minute: string = `${minuteTemp}`;\n  if (minuteTemp < 10) {\n    minute = `0${minuteTemp}`;\n  }\n  if (step === 'MINUTE') {\n    return `${hour}:${minute}\\n${month}-${day}`;\n  }\n  return '';\n};\n\nexport interface State {\n  durationRow: Duration;\n  eventStack: any;\n  chartStack: any;\n  edit: boolean;\n  lock: boolean;\n  utc: string | number;\n}\n\nconst initState: State = {\n  durationRow: getDurationRow(),\n  eventStack: [],\n  chartStack: [],\n  edit: false,\n  lock: true,\n  utc: window.localStorage.getItem('utc') || -(new Date().getTimezoneOffset() / 60),\n};\n\n// getters\nconst getters = {\n  duration(state: State): Duration {\n    return {\n      start: getLocalTime(parseInt(state.utc + '', 10), state.durationRow.start),\n      end: getLocalTime(parseInt(state.utc + '', 10), state.durationRow.end),\n      step: state.durationRow.step,\n    };\n  },\n  intervalTime(state: State, getter: any): string[] {\n    let interval: number = 946080000000;\n    switch (getter.duration.step) {\n      case 'MINUTE':\n        interval = 60000;\n        break;\n      case 'HOUR':\n        interval = 3600000;\n        break;\n      case 'DAY':\n        interval = 86400000;\n        break;\n      case 'MONTH':\n        interval =\n          (getter.duration.end.getTime() - getter.duration.start.getTime()) /\n          (getter.duration.end.getFullYear() * 12 +\n            getter.duration.end.getMonth() -\n            getter.duration.start.getFullYear() * 12 -\n            getter.duration.start.getMonth());\n        break;\n    }\n    const utcSpace = (parseInt(state.utc + '', 10) + new Date().getTimezoneOffset() / 60) * 3600000;\n    const startUnix: number = getter.duration.start.getTime();\n    const endUnix: number = getter.duration.end.getTime();\n    const timeIntervals: string[] = [];\n    for (let i = 0; i <= endUnix - startUnix; i += interval) {\n      const temp: string = dateFormatTime(new Date(startUnix + i - utcSpace), getter.duration.step);\n      timeIntervals.push(temp);\n    }\n    return timeIntervals;\n  },\n  durationTime(_: State, getter: any): DurationTime {\n    return {\n      start: dateFormat(getter.duration.start, getter.duration.step),\n      end: dateFormat(getter.duration.end, getter.duration.step),\n      step: getter.duration.step,\n    };\n  },\n};\n\n// mutations\nconst mutations: MutationTree<State> = {\n  [types.SET_DURATION](state: State, data: Duration): void {\n    localStorage.setItem('durationRow', JSON.stringify(data, null, 0));\n    state.durationRow = data;\n  },\n  [types.RESET_DURATION](state: State): void {\n    localStorage.removeItem('durationRow');\n    state.durationRow = getDurationRow();\n  },\n  [types.SET_UTC](state: State, data: number): void {\n    state.utc = data;\n  },\n  [types.SET_EVENTS](state: State, data: any[]): void {\n    state.eventStack = data;\n  },\n  [types.SET_CHARTS](state: State, data: any[]): void {\n    state.chartStack.push(data);\n  },\n  [types.RUN_EVENTS](state: State): void {\n    clearTimeout(timer);\n    timer = setTimeout(\n      () =>\n        state.eventStack.forEach((event: any) => {\n          setTimeout(event(), 0);\n        }),\n      500,\n    );\n  },\n  [types.SET_EDIT](state: State, status: boolean): void {\n    state.edit = status;\n  },\n};\n\n// actions\nconst actions: ActionTree<State, any> = {\n  SET_UTC(context: { commit: Commit }, data: number): void {\n    context.commit(types.SET_UTC, data);\n    context.commit(types.RUN_EVENTS);\n  },\n  SET_DURATION(context: { commit: Commit }, data: Duration): void {\n    context.commit(types.SET_DURATION, data);\n    if (window.axiosCancel.length !== 0) {\n      for (const event of window.axiosCancel) {\n        setTimeout(event(), 0);\n      }\n      window.axiosCancel = [];\n    }\n    context.commit(types.RUN_EVENTS);\n  },\n  RESET_DURATION(context: { commit: Commit }): void {\n    context.commit(types.RESET_DURATION);\n    context.commit(types.RUN_EVENTS);\n  },\n  RUN_EVENTS(context: { commit: Commit }): void {\n    if (window.axiosCancel.length !== 0) {\n      for (const event of window.axiosCancel) {\n        setTimeout(event(), 0);\n      }\n      window.axiosCancel = [];\n    }\n    context.commit(types.RUN_EVENTS);\n  },\n  SET_CHARTS(context: { commit: Commit }, data: any[]): void {\n    context.commit(types.SET_CHARTS, data);\n  },\n  CLEAR_CHARTS(context: { commit: Commit }): void {\n    context.commit(types.SET_CHARTS, []);\n  },\n  SET_EDIT(context: { commit: Commit }, status: boolean): void {\n    context.commit(types.SET_EDIT, status);\n  },\n  SET_LOCK(context: { commit: Commit }, status: boolean): void {\n    context.commit(types.SET_LOCK, status);\n  },\n};\n\nexport default {\n  state: initState,\n  getters,\n  actions,\n  mutations,\n};\n"],"sourceRoot":""}]}