{"remainingRequest":"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/thread-loader/dist/cjs.js!/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/babel-loader/lib/index.js!/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/ts-loader/index.js??ref--13-3!/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/src/views/components/topology/topo-group/index.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/src/views/components/topology/topo-group/index.vue","mtime":1592485041000},{"path":"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/ts-loader/index.js","mtime":1545640398000},{"path":"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _classCallCheck from \"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/@babel/runtime-corejs2/helpers/esm/inherits\";\nimport * as tslib_1 from \"tslib\";\nimport { Component, Vue } from 'vue-property-decorator';\nimport { Action, Getter, Mutation, State } from 'vuex-class';\nimport CreateGroup from './create-group.vue';\nimport GroupItem from './group-item.vue';\nimport Axios from 'axios';\n\nvar TopoGroup =\n/*#__PURE__*/\nfunction (_Vue) {\n  _inherits(TopoGroup, _Vue);\n\n  function TopoGroup() {\n    var _this;\n\n    _classCallCheck(this, TopoGroup);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TopoGroup).apply(this, arguments));\n    _this.servicesMap = [];\n    _this.currentPage = 1;\n    return _this;\n  }\n\n  _createClass(TopoGroup, [{\n    key: \"page\",\n    value: function page(pageNumber) {\n      this.currentPage = pageNumber;\n    }\n  }, {\n    key: \"handleDeleteGroup\",\n    value: function handleDeleteGroup(id) {\n      var r = confirm('Do you want to delete this group!');\n\n      if (r === true) {\n        this.DELETE_GROUP(id);\n      }\n    }\n  }, {\n    key: \"handleSelectGroup\",\n    value: function handleSelectGroup(id) {\n      this.SELECT_GROUP(id);\n      this.GET_TOPO({\n        duration: this.durationTime,\n        serviceIds: this.services.map(function (i) {\n          return i.key;\n        })\n      });\n    }\n  }, {\n    key: \"fetchData\",\n    value: function fetchData() {\n      var _this2 = this;\n\n      return Axios.post('/graphql', {\n        query: \"\\n        query queryServices($duration: Duration!) {\\n          services: getAllServices(duration: $duration) {\\n            key: id\\n            label: name\\n          }\\n        }\",\n        variables: {\n          duration: this.durationTime\n        }\n      }).then(function (res) {\n        _this2.servicesMap = res.data.data.services ? res.data.data.services : [];\n      });\n    }\n  }, {\n    key: \"initGroupTopo\",\n    value: function initGroupTopo() {\n      var serviceOld = localStorage.getItem('topology-group-history') || '';\n\n      if (!this.rocketTopoGroup.groups.length) {\n        return;\n      }\n\n      if (!this.rocketTopoGroup.groups.some(function (i) {\n        return i.id === serviceOld;\n      })) {\n        serviceOld = this.rocketTopoGroup.groups[0].id;\n        this.handleSelectGroup(serviceOld);\n      } else {\n        this.handleSelectGroup(serviceOld);\n      }\n    }\n  }, {\n    key: \"created\",\n    value: function created() {\n      var _this3 = this;\n\n      this.INIT_GROUPS();\n      this.fetchData().then(function () {\n        _this3.initGroupTopo();\n      });\n    }\n  }, {\n    key: \"pagedData\",\n    get: function get() {\n      var start = 10 * this.currentPage;\n      var end = 10;\n\n      if (start < this.rocketTopoGroup.groups.length) {\n        end = start;\n      } else {\n        end = this.rocketTopoGroup.groups.length;\n      }\n\n      return this.rocketTopoGroup.groups.slice(start - 10, end);\n    }\n  }]);\n\n  return TopoGroup;\n}(Vue);\n\ntslib_1.__decorate([State('rocketTopo')], TopoGroup.prototype, \"stateTopo\", void 0);\n\ntslib_1.__decorate([State('rocketTopoGroup')], TopoGroup.prototype, \"rocketTopoGroup\", void 0);\n\ntslib_1.__decorate([Getter('durationTime')], TopoGroup.prototype, \"durationTime\", void 0);\n\ntslib_1.__decorate([Getter('rocketTopoGroup/services')], TopoGroup.prototype, \"services\", void 0);\n\ntslib_1.__decorate([Mutation('rocketTopoGroup/INIT_GROUPS')], TopoGroup.prototype, \"INIT_GROUPS\", void 0);\n\ntslib_1.__decorate([Mutation('rocketTopoGroup/DELETE_GROUP')], TopoGroup.prototype, \"DELETE_GROUP\", void 0);\n\ntslib_1.__decorate([Mutation('rocketTopoGroup/SELECT_GROUP')], TopoGroup.prototype, \"SELECT_GROUP\", void 0);\n\ntslib_1.__decorate([Mutation('SET_EVENTS')], TopoGroup.prototype, \"SET_EVENTS\", void 0);\n\ntslib_1.__decorate([Action('rocketTopo/FILTER_TOPO')], TopoGroup.prototype, \"FILTER_TOPO\", void 0);\n\ntslib_1.__decorate([Action('rocketTopo/GET_TOPO')], TopoGroup.prototype, \"GET_TOPO\", void 0);\n\nTopoGroup = tslib_1.__decorate([Component({\n  components: {\n    CreateGroup: CreateGroup,\n    GroupItem: GroupItem\n  }\n})], TopoGroup);\nexport default TopoGroup;",{"version":3,"sources":["/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/src/views/components/topology/topo-group/index.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport topo, { State as topoState } from '@/store/modules/topology';\nimport { Component, Vue, Watch } from 'vue-property-decorator';\nimport { Action, Getter, Mutation, State } from 'vuex-class';\nimport { State as TopoGroupState } from '@/store/modules/topology/group';\nimport CreateGroup from './create-group.vue';\nimport GroupItem from './group-item.vue';\nimport Axios, { AxiosResponse } from 'axios';\n\n@Component({\n  components: {\n    CreateGroup,\n    GroupItem,\n  },\n})\nexport default class TopoGroup extends Vue {\n  @State('rocketTopo') private stateTopo!: topoState;\n  @State('rocketTopoGroup') private rocketTopoGroup!: TopoGroupState;\n  @Getter('durationTime') private durationTime: any;\n  @Getter('rocketTopoGroup/services') private services!: Array<{ label: string; key: string }>;\n  @Mutation('rocketTopoGroup/INIT_GROUPS') private INIT_GROUPS: any;\n  @Mutation('rocketTopoGroup/DELETE_GROUP') private DELETE_GROUP: any;\n  @Mutation('rocketTopoGroup/SELECT_GROUP') private SELECT_GROUP: any;\n  @Mutation('SET_EVENTS') private SET_EVENTS: any;\n  @Action('rocketTopo/FILTER_TOPO') private FILTER_TOPO: any;\n  @Action('rocketTopo/GET_TOPO') private GET_TOPO: any;\n  private servicesMap = [];\n  private currentPage = 1;\n  private get pagedData() {\n    const start = 10 * this.currentPage;\n    let end = 10;\n    if (start < this.rocketTopoGroup.groups.length) {\n      end = start;\n    } else {\n      end = this.rocketTopoGroup.groups.length;\n    }\n    return this.rocketTopoGroup.groups.slice(start - 10, end);\n  }\n  private page(pageNumber: number) {\n    this.currentPage = pageNumber;\n  }\n  private handleDeleteGroup(id: string) {\n    const r = confirm('Do you want to delete this group!');\n    if (r === true) {\n      this.DELETE_GROUP(id);\n    }\n  }\n  private handleSelectGroup(id: string) {\n    this.SELECT_GROUP(id);\n    this.GET_TOPO({ duration: this.durationTime, serviceIds: this.services.map((i) => i.key) });\n  }\n  private fetchData() {\n    return Axios.post('/graphql', {\n      query: `\n        query queryServices($duration: Duration!) {\n          services: getAllServices(duration: $duration) {\n            key: id\n            label: name\n          }\n        }`,\n      variables: {\n        duration: this.durationTime,\n      },\n    }).then((res: AxiosResponse) => {\n      this.servicesMap = res.data.data.services ? res.data.data.services : [];\n    });\n  }\n  private initGroupTopo() {\n    let serviceOld = localStorage.getItem('topology-group-history') || '';\n    if (!this.rocketTopoGroup.groups.length) {\n      return;\n    }\n    if (\n      !this.rocketTopoGroup.groups.some(\n        (i: { id: string; name: string; services: Array<{ label: string; key: string }> }) => i.id === serviceOld,\n      )\n    ) {\n      serviceOld = this.rocketTopoGroup.groups[0].id;\n      this.handleSelectGroup(serviceOld);\n    } else {\n      this.handleSelectGroup(serviceOld);\n    }\n  }\n  private created() {\n    this.INIT_GROUPS();\n    this.fetchData().then(() => {\n      this.initGroupTopo();\n    });\n  }\n}\n"],"sourceRoot":""}]}