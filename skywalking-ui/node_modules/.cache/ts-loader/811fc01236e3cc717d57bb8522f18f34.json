{"remainingRequest":"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/thread-loader/dist/cjs.js!/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/babel-loader/lib/index.js!/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/ts-loader/index.js??ref--13-3!/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/src/views/components/profile/profile-trace-detail.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/src/views/components/profile/profile-trace-detail.vue","mtime":1592485041000},{"path":"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/ts-loader/index.js","mtime":1545640398000},{"path":"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _getIterator from \"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/@babel/runtime-corejs2/core-js/get-iterator\";\nimport _classCallCheck from \"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/@babel/runtime-corejs2/helpers/esm/inherits\";\nimport * as tslib_1 from \"tslib\";\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport { Action, Mutation } from 'vuex-class';\nimport { TraceDetailChartTable } from '../common';\nimport ProfileDetailChartTable from './profile-detail-chart-table.vue';\n\nvar ProfileTraceDetail =\n/*#__PURE__*/\nfunction (_Vue) {\n  _inherits(ProfileTraceDetail, _Vue);\n\n  function ProfileTraceDetail() {\n    var _this;\n\n    _classCallCheck(this, ProfileTraceDetail);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ProfileTraceDetail).apply(this, arguments));\n    _this.timeRange = [];\n    _this.mode = 'include';\n    _this.message = '';\n    _this.loading = false;\n    return _this;\n  }\n\n  _createClass(ProfileTraceDetail, [{\n    key: \"selectSpan\",\n    value: function selectSpan(data) {\n      this.SET_CURRENT_SPAN(data);\n    }\n  }, {\n    key: \"spanModeChange\",\n    value: function spanModeChange(item) {\n      this.mode = item.target.value;\n      this.updateTimeRange();\n    }\n  }, {\n    key: \"updateTimeRange\",\n    value: function updateTimeRange() {\n      if (this.mode === 'include') {\n        this.timeRange = [{\n          start: this.currentSpan.startTime,\n          end: this.currentSpan.endTime\n        }];\n      } else {\n        var _this$currentSpan = this.currentSpan,\n            children = _this$currentSpan.children,\n            startTime = _this$currentSpan.startTime,\n            endTime = _this$currentSpan.endTime;\n        var timeRange = [];\n\n        if (!children || !children.length) {\n          this.timeRange = [{\n            start: this.currentSpan.startTime,\n            end: this.currentSpan.endTime\n          }];\n          return;\n        }\n\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = _getIterator(children), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var item = _step.value;\n            timeRange.push({\n              start: startTime,\n              end: item.startTime\n            }, {\n              start: item.endTime,\n              end: endTime\n            });\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return != null) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        timeRange = timeRange.reduce(function (prev, cur) {\n          var isUpdate = false;\n          var _iteratorNormalCompletion2 = true;\n          var _didIteratorError2 = false;\n          var _iteratorError2 = undefined;\n\n          try {\n            for (var _iterator2 = _getIterator(prev), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n              var item = _step2.value;\n\n              if (cur.start <= item.end && item.start <= cur.start) {\n                isUpdate = true;\n                item.start = item.start < cur.start ? cur.start : item.start;\n                item.end = item.end < cur.end ? item.end : cur.end;\n              }\n            }\n          } catch (err) {\n            _didIteratorError2 = true;\n            _iteratorError2 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n                _iterator2.return();\n              }\n            } finally {\n              if (_didIteratorError2) {\n                throw _iteratorError2;\n              }\n            }\n          }\n\n          if (!isUpdate) {\n            prev.push(cur);\n          }\n\n          return prev;\n        }, []);\n        this.timeRange = timeRange.filter(function (item) {\n          return item.start !== item.end;\n        });\n      }\n    }\n  }, {\n    key: \"analyzeProfile\",\n    value: function analyzeProfile() {\n      var _this2 = this;\n\n      this.loading = true;\n      this.updateTimeRange();\n      this.GET_PROFILE_ANALYZE({\n        segmentId: this.currentSegment.segmentId,\n        timeRanges: this.timeRange\n      }).then(function (result) {\n        _this2.message = result;\n      }).catch(function (err) {\n        throw err;\n      }).finally(function () {\n        _this2.loading = false;\n      });\n    }\n  }]);\n\n  return ProfileTraceDetail;\n}(Vue);\n\ntslib_1.__decorate([Prop()], ProfileTraceDetail.prototype, \"segmentSpans\", void 0);\n\ntslib_1.__decorate([Prop()], ProfileTraceDetail.prototype, \"currentSegment\", void 0);\n\ntslib_1.__decorate([Prop()], ProfileTraceDetail.prototype, \"profileAnalyzation\", void 0);\n\ntslib_1.__decorate([Prop()], ProfileTraceDetail.prototype, \"highlightTop\", void 0);\n\ntslib_1.__decorate([Prop()], ProfileTraceDetail.prototype, \"currentSpan\", void 0);\n\ntslib_1.__decorate([Action('profileStore/GET_PROFILE_ANALYZE')], ProfileTraceDetail.prototype, \"GET_PROFILE_ANALYZE\", void 0);\n\ntslib_1.__decorate([Mutation('profileStore/SET_CURRENT_SPAN')], ProfileTraceDetail.prototype, \"SET_CURRENT_SPAN\", void 0);\n\nProfileTraceDetail = tslib_1.__decorate([Component({\n  components: {\n    TraceDetailChartTable: TraceDetailChartTable,\n    ProfileDetailChartTable: ProfileDetailChartTable\n  }\n})], ProfileTraceDetail);\nexport default ProfileTraceDetail;",{"version":3,"sources":["/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/Files/Study/apm/apache-skywalking-apm-8.0.1/skywalking-ui/src/views/components/profile/profile-trace-detail.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Duration, Option } from '@/types/global';\nimport { Component, Prop, Vue, Watch } from 'vue-property-decorator';\nimport { Action, State, Mutation } from 'vuex-class';\nimport { TraceDetailChartTable } from '../common';\nimport ProfileDetailChartTable from './profile-detail-chart-table.vue';\n\n@Component({\n  components: { TraceDetailChartTable, ProfileDetailChartTable },\n})\nexport default class ProfileTraceDetail extends Vue {\n  @Prop() private segmentSpans: any;\n  @Prop() private currentSegment: any;\n  @Prop() private profileAnalyzation: any;\n  @Prop() private highlightTop!: boolean;\n  @Prop() private currentSpan!: any;\n  @Action('profileStore/GET_PROFILE_ANALYZE') private GET_PROFILE_ANALYZE: any;\n  @Mutation('profileStore/SET_CURRENT_SPAN') private SET_CURRENT_SPAN: any;\n\n  private timeRange: Array<{ start: number; end: number }> = [];\n  private mode: string = 'include';\n  private message: string = '';\n  private loading: boolean = false;\n\n  private selectSpan(data: any) {\n    this.SET_CURRENT_SPAN(data);\n  }\n  private spanModeChange(item: any) {\n    this.mode = item.target.value;\n    this.updateTimeRange();\n  }\n  private updateTimeRange() {\n    if (this.mode === 'include') {\n      this.timeRange = [\n        {\n          start: this.currentSpan.startTime,\n          end: this.currentSpan.endTime,\n        },\n      ];\n    } else {\n      const { children, startTime, endTime } = this.currentSpan;\n      let timeRange = [];\n\n      if (!children || !children.length) {\n        this.timeRange = [\n          {\n            start: this.currentSpan.startTime,\n            end: this.currentSpan.endTime,\n          },\n        ];\n        return;\n      }\n      for (const item of children) {\n        timeRange.push(\n          {\n            start: startTime,\n            end: item.startTime,\n          },\n          {\n            start: item.endTime,\n            end: endTime,\n          },\n        );\n      }\n      timeRange = timeRange.reduce((prev: any[], cur) => {\n        let isUpdate = false;\n        for (const item of prev) {\n          if (cur.start <= item.end && item.start <= cur.start) {\n            isUpdate = true;\n            item.start = item.start < cur.start ? cur.start : item.start;\n            item.end = item.end < cur.end ? item.end : cur.end;\n          }\n        }\n        if (!isUpdate) {\n          prev.push(cur);\n        }\n        return prev;\n      }, []);\n      this.timeRange = timeRange.filter((item: any) => item.start !== item.end);\n    }\n  }\n  private analyzeProfile() {\n    this.loading = true;\n    this.updateTimeRange();\n    this.GET_PROFILE_ANALYZE({\n      segmentId: this.currentSegment.segmentId,\n      timeRanges: this.timeRange,\n    })\n      .then((result: string) => {\n        this.message = result;\n      })\n      .catch((err: any) => {\n        throw err;\n      })\n      .finally(() => {\n        this.loading = false;\n      });\n  }\n}\n"],"sourceRoot":""}]}